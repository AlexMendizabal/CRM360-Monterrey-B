(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"9lCC":function(l,e,t){"use strict";t.d(e,"a",(function(){return n}));class n{}},C2w5:function(l,e,t){"use strict";t.d(e,"a",(function(){return r}));var n=t("8Y7J"),a=t("cclQ"),s=t("xJfa");t("Rk3r"),t("yFC9");class r{constructor(l,e,t){this.dashboardService=l,this.zone=e,this.dateService=t,this.showHeader=!0,this.loaderStyle="full",this.onData=new n.EventEmitter,this.pastChartsEmpty=!1,this.currChartsEmpty=!1,this.pastToneladasEmpty=!1,this.pastClientesEmpty=!1,this.pastExtrasEmpty=!1,this.currToneladasEmpty=!1,this.currClientesEmpty=!1,this.currExtrasEmpty=!1}ngOnInit(){this.onDestroy(),this.renderMonthFilters(),this.getChartsData(this.idEscritorio,this.idVendedor)}ngOnDestroy(){this.onDestroy()}onDestroy(){this.zone.runOutsideAngular(()=>{this.pastChartToneladas&&this.pastChartToneladas.dispose(),this.pastChartClientes&&this.pastChartClientes.dispose(),this.pastChartExtras&&this.pastChartExtras.dispose(),this.currChartToneladas&&this.currChartToneladas.dispose(),this.currChartClientes&&this.currChartClientes.dispose(),this.currChartExtras&&this.currChartExtras.dispose()})}resetChartsData(){this.chartLoaded=!1,this.pastChartsEmpty=!1,this.currChartsEmpty=!1,this.pastToneladasEmpty=!1,this.pastClientesEmpty=!1,this.pastExtrasEmpty=!1,this.currToneladasEmpty=!1,this.currClientesEmpty=!1,this.currExtrasEmpty=!1}getChartsData(l,e){this.resetChartsData(),this.dashboardService.getMetas(l,e).subscribe(l=>{this.renderCharts(l)})}renderCharts(l){200===l.responseCode?(this.onData.emit(l.result),l.result.passado.toneladas&&Object.keys(l.result.passado.toneladas).length>0?this.renderChart("passadoToneladas",l.result.passado.toneladas,"past-gauge-chart-toneladas"):this.handleEmpty("passadoToneladas"),l.result.passado.clientes&&Object.keys(l.result.passado.clientes).length>0?this.renderChart("passadoClientes",l.result.passado.clientes,"past-gauge-chart-clientes"):this.handleEmpty("passadoClientes"),l.result.passado.extras&&Object.keys(l.result.passado.extras).length>0?this.renderChart("passadoExtras",l.result.passado.extras,"past-gauge-chart-extras"):this.handleEmpty("passadoExtras"),l.result.passado&&0!=Object.keys(l.result.passado).length||this.handleEmpty("passadoTodos"),l.result.corrente.toneladas&&Object.keys(l.result.corrente.toneladas).length>0?this.renderChart("correnteToneladas",l.result.corrente.toneladas,"current-gauge-chart-toneladas"):this.handleEmpty("correnteToneladas"),l.result.corrente.clientes&&Object.keys(l.result.corrente.clientes).length>0?this.renderChart("correnteClientes",l.result.corrente.clientes,"current-gauge-chart-clientes"):this.handleEmpty("correnteClientes"),l.result.corrente.extras&&Object.keys(l.result.corrente.extras).length>0?this.renderChart("correnteExtras",l.result.corrente.extras,"current-gauge-chart-extras"):this.handleEmpty("correnteExtras"),l.result.corrente&&0!=Object.keys(l.result.corrente).length||this.handleEmpty("correnteTodos")):(this.handleEmpty("passadoToneladas"),this.handleEmpty("passadoClientes"),this.handleEmpty("passadoExtras"),this.handleEmpty("passadoTodos"),this.handleEmpty("correnteToneladas"),this.handleEmpty("correnteClientes"),this.handleEmpty("correnteExtras"),this.handleEmpty("correnteTodos")),this.chartLoaded=!0}handleEmpty(l){"passadoTodos"==l?this.pastChartsEmpty=!0:"passadoToneladas"==l?this.pastToneladasEmpty=!0:"passadoClientes"==l||"passadoExtras"==l?this.pastClientesEmpty=!0:"correnteTodos"==l?this.currChartsEmpty=!0:"correnteToneladas"==l?this.currToneladasEmpty=!0:"correnteClientes"==l?this.currClientesEmpty=!0:"correnteExtras"==l&&(this.currExtrasEmpty=!0)}renderChart(l,e,t){this.zone.runOutsideAngular(()=>{let n,r=a.h(t,s.GaugeChart);r.hiddenState.properties.opacity=0,r.data=e,r.innerRadius=a.k(82);let u=100*(e.progresso/e.meta-1);u<=40?n=1.4:u>40&&u<50?n=1.5:u>50&&u<60?n=1.6:u>60&&u<70?n=1.7:u>70&&u<80?n=1.8:u>80&&u<90?n=1.9:u>90&&u<100&&(n=2);const i=e.meta*n,d=e.unidade,o=.88*e.meta,c=.95*e.meta,h=e.meta,p=1.01*e.meta,m=e.tipo,g=e.progresso,f=e.meta,C=e.percentual.toFixed(0);let y;y=e.progresso>i?i:e.progresso;let E=r.xAxes.push(new s.ValueAxis);E.min=0,E.max=i,E.strictMinMax=!1,E.renderer.radius=a.k(80),E.renderer.inside=!1,E.renderer.ticks.template.strokeOpacity=1,E.renderer.ticks.template.length=10,E.renderer.grid.template.disabled=!1,E.renderer.labels.template.radius=35,E.renderer.labels.template.adapter.add("text",l=>l+d);let v=r.xAxes.push(new s.ValueAxis);v.min=0,v.max=i,v.renderer.innerRadius=10,v.strictMinMax=!0,v.renderer.labels.template.disabled=!0,v.renderer.ticks.template.disabled=!0,v.renderer.grid.template.disabled=!0;let b=v.axisRanges.create();b.value=0,b.endValue=o,b.axisFill.fillOpacity=1,b.axisFill.fill=a.g("#FF4343");let x=v.axisRanges.create();x.value=o,x.endValue=c,x.axisFill.fillOpacity=1,x.axisFill.fill=a.g("#FFEA00");let T=v.axisRanges.create();T.value=c,T.endValue=h,T.axisFill.fillOpacity=1,T.axisFill.fill=a.g("#4DCC71");let I=v.axisRanges.create();I.value=h,I.endValue=p,I.axisFill.fillOpacity=1,I.axisFill.fill=a.g("#000000");let M=v.axisRanges.create();M.value=p,M.endValue=i,M.axisFill.fillOpacity=1,M.axisFill.fill=a.g("#31924C");let R=r.radarContainer.createChild(a.c);R.isMeasured=!1,R.x=a.k(50),R.y=60,R.horizontalCenter="middle",R.verticalCenter="bottom",R.html=`<p class="text-center mb-0"><strong>${m}</strong></p><p class="text-center">${g}${d} de ${f}${d} <strong>(${C}%)</strong></p>`;let k=r.hands.push(new s.ClockHand);k.axis=v,k.innerRadius=a.k(20),k.startWidth=3,k.pin.disabled=!0,k.value=y,"passadoToneladas"==l?this.pastChartToneladas=r:"passadoClientes"==l?this.pastChartClientes=r:"passadoExtras"==l?this.pastChartExtras=r:"correnteToneladas"==l?this.currChartToneladas=r:"correnteClientes"==l?this.currChartClientes=r:"correnteExtras"==l&&(this.currChartExtras=r)})}renderMonthFilters(){const l=new Date,e=new Date;31===l.getDate()?e.setDate(l.getDate()-31):e.setDate(l.getDate()-30),this.currMonth=this.dateService.getFullMonth(l),this.pastMonth=this.dateService.getFullMonth(e),this.activeMonth=this.currMonth}setMonth(l){this.chartLoaded=!1,this.activeMonth=l,setTimeout(()=>{this.chartLoaded=!0},1e3)}}},J2fE:function(l,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return E}));var n=t("8Y7J"),a=t("SVse"),s=t("978R"),r=t("z/SZ"),u=t("2uy1"),i=t("qNf+"),d=t("MaMn"),o=(t("C2w5"),t("yFC9"),t("Rk3r"),n["\u0275crt"]({encapsulation:0,styles:[["#metas{height:345px}  #metas #current-gauge-chart-clientes,   #metas #current-gauge-chart-extras,   #metas #current-gauge-chart-toneladas,   #metas #past-gauge-chart-clientes,   #metas #past-gauge-chart-extras,   #metas #past-gauge-chart-toneladas{height:300px;max-width:400px}"]],data:{}}));function c(l){return n["\u0275vid"](0,[(l()(),n["\u0275eld"](0,0,null,null,4,"p",[],null,null,null,null,null)),(l()(),n["\u0275eld"](1,0,null,null,2,"b",[],null,null,null,null,null)),(l()(),n["\u0275eld"](2,0,null,null,1,"u",[],null,null,null,null,null)),(l()(),n["\u0275ted"](-1,null,["Facturacion total:"])),(l()(),n["\u0275ted"](-1,null,[" Todas las ventas hasta la fecha frente al objetivo del mes en toneladas."])),(l()(),n["\u0275eld"](5,0,null,null,4,"p",[],null,null,null,null,null)),(l()(),n["\u0275eld"](6,0,null,null,2,"b",[],null,null,null,null,null)),(l()(),n["\u0275eld"](7,0,null,null,1,"u",[],null,null,null,null,null)),(l()(),n["\u0275ted"](-1,null,["Clientes con una compra:"])),(l()(),n["\u0275ted"](-1,null,[" Todos los clientes que han realizado compras hasta el momento frente al objetivo del mes."])),(l()(),n["\u0275eld"](10,0,null,null,4,"p",[["class","mb-0"]],null,null,null,null,null)),(l()(),n["\u0275eld"](11,0,null,null,2,"b",[],null,null,null,null,null)),(l()(),n["\u0275eld"](12,0,null,null,1,"u",[],null,null,null,null,null)),(l()(),n["\u0275ted"](-1,null,["Meta bonificaciones (Civil o Industrial Larga):"])),(l()(),n["\u0275ted"](-1,null,[" Todas las ventas realizadas hasta la fecha en la l\xednea espec\xedfica frente al objetivo en toneladas (Civil no incluye Corte y Doblado/Armado e Industrial Largo no incluye Perfil W/H).."]))],null,null)}function h(l){return n["\u0275vid"](0,[(l()(),n["\u0275eld"](0,0,null,null,10,"div",[["class","btn-group btn-group-sm"]],null,null,null,null,null)),(l()(),n["\u0275eld"](1,0,null,null,4,"button",[["class","btn btn-light"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,e,t){var n=!0,a=l.component;return"click"===e&&(n=!1!==a.setMonth(a.pastMonth)&&n),n}),null,null)),n["\u0275did"](2,278528,null,0,a.NgClass,[n.IterableDiffers,n.KeyValueDiffers,n.ElementRef,n.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),n["\u0275pod"](3,{active:0}),(l()(),n["\u0275eld"](4,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),n["\u0275ted"](5,null,["",""])),(l()(),n["\u0275eld"](6,0,null,null,4,"button",[["class","btn btn-light active"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,e,t){var n=!0,a=l.component;return"click"===e&&(n=!1!==a.setMonth(a.currMonth)&&n),n}),null,null)),n["\u0275did"](7,278528,null,0,a.NgClass,[n.IterableDiffers,n.KeyValueDiffers,n.ElementRef,n.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),n["\u0275pod"](8,{active:0}),(l()(),n["\u0275eld"](9,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),n["\u0275ted"](10,null,["",""]))],(function(l,e){var t=e.component,n=l(e,3,0,t.activeMonth==t.pastMonth);l(e,2,0,"btn btn-light",n);var a=l(e,8,0,t.activeMonth==t.currMonth);l(e,7,0,"btn btn-light active",a)}),(function(l,e){var t=e.component;l(e,1,0,!t.chartLoaded),l(e,5,0,t.pastMonth),l(e,6,0,!t.chartLoaded),l(e,10,0,t.currMonth)}))}function p(l){return n["\u0275vid"](0,[(l()(),n["\u0275eld"](0,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(l()(),n["\u0275eld"](1,0,null,null,8,"div",[["class","col"]],null,null,null,null,null)),(l()(),n["\u0275eld"](2,0,null,null,7,"div",[["class","d-flex justify-content-between"]],null,null,null,null,null)),(l()(),n["\u0275eld"](3,0,null,null,4,"div",[["class","mtc-title mb-0"]],null,null,null,null,null)),(l()(),n["\u0275and"](0,[["metasTooltipTemplate",2]],null,0,null,c)),(l()(),n["\u0275eld"](5,16777216,null,null,1,"i",[["class","far fa-question-circle p-2"],["placement","right"]],[[1,"aria-describedby",0]],null,null,null,null)),n["\u0275did"](6,212992,null,0,s.c,[n.ViewContainerRef,r.a,s.a,n.ElementRef,n.Renderer2,u.a],{tooltip:[0,"tooltip"],placement:[1,"placement"]},null),(l()(),n["\u0275ted"](-1,null,[" Mapa de metas "])),(l()(),n["\u0275and"](16777216,null,null,1,null,h)),n["\u0275did"](9,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,e){var t=e.component;l(e,6,0,n["\u0275nov"](e,4),"right"),l(e,9,0,!t.pastChartsEmpty||!t.currChartsEmpty)}),(function(l,e){l(e,5,0,n["\u0275nov"](e,6).ariaDescribedby)}))}function m(l){return n["\u0275vid"](0,[(l()(),n["\u0275eld"](0,0,null,null,1,"empty-result",[["message","Ninguna informacion encontrada"]],null,null,null,i.b,i.a)),n["\u0275did"](1,49152,null,0,d.a,[],{message:[0,"message"]},null)],(function(l,e){l(e,1,0,"Ninguna informacion encontrada")}),null)}function g(l){return n["\u0275vid"](0,[(l()(),n["\u0275eld"](0,0,null,null,1,"empty-result",[["message","Ninguna informacion encontrada"]],null,null,null,i.b,i.a)),n["\u0275did"](1,49152,null,0,d.a,[],{message:[0,"message"]},null)],(function(l,e){l(e,1,0,"Ninguna informacion encontrada")}),null)}function f(l){return n["\u0275vid"](0,[(l()(),n["\u0275eld"](0,0,null,null,2,"div",[["class","row align-items-center justify-content-center h-100"]],null,null,null,null,null)),(l()(),n["\u0275eld"](1,0,null,null,1,"div",[["class","col text-center"]],null,null,null,null,null)),(l()(),n["\u0275eld"](2,0,null,null,0,"div",[["class","spinner-border text-dark"]],null,null,null,null,null))],null,null)}function C(l){return n["\u0275vid"](0,[(l()(),n["\u0275eld"](0,0,null,null,3,"div",[["class","mt-2 d-flex w-100"]],null,null,null,null,null)),(l()(),n["\u0275eld"](1,0,null,null,0,"div",[["class","spinner-border spinner-border-sm text-dark my-auto mr-2"]],null,null,null,null,null)),(l()(),n["\u0275eld"](2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),n["\u0275ted"](-1,null,["Cargando mapa de metas..."]))],null,null)}function y(l){return n["\u0275vid"](0,[(l()(),n["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),n["\u0275and"](16777216,null,null,1,null,f)),n["\u0275did"](2,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),n["\u0275and"](16777216,null,null,1,null,C)),n["\u0275did"](4,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,e){var t=e.component;l(e,2,0,"full"===t.loaderStyle),l(e,4,0,"tiny"===t.loaderStyle)}),null)}function E(l){return n["\u0275vid"](0,[(l()(),n["\u0275eld"](0,0,null,null,23,"div",[["class","row"],["id","metas"]],null,null,null,null,null)),(l()(),n["\u0275eld"](1,0,null,null,22,"div",[["class","col"]],null,null,null,null,null)),(l()(),n["\u0275and"](16777216,null,null,1,null,p)),n["\u0275did"](3,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),n["\u0275eld"](4,0,null,null,8,"div",[["class","row align-items-center justify-content-center h-100"]],[[8,"hidden",0]],null,null,null,null)),(l()(),n["\u0275eld"](5,0,null,null,1,"div",[["class","col-md-4 mb-4 d-flex justify-content-center"]],[[8,"hidden",0]],null,null,null,null)),(l()(),n["\u0275eld"](6,0,null,null,0,"div",[["class","amcharts"],["id","past-gauge-chart-toneladas"]],null,null,null,null,null)),(l()(),n["\u0275eld"](7,0,null,null,1,"div",[["class","col-md-4 mb-4 d-flex justify-content-center"]],[[8,"hidden",0]],null,null,null,null)),(l()(),n["\u0275eld"](8,0,null,null,0,"div",[["class","amcharts"],["id","past-gauge-chart-clientes"]],null,null,null,null,null)),(l()(),n["\u0275eld"](9,0,null,null,1,"div",[["class","col-md-4 mb-4 d-flex justify-content-center"]],[[8,"hidden",0]],null,null,null,null)),(l()(),n["\u0275eld"](10,0,null,null,0,"div",[["class","amcharts"],["id","past-gauge-chart-extras"]],null,null,null,null,null)),(l()(),n["\u0275and"](16777216,null,null,1,null,m)),n["\u0275did"](12,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),n["\u0275eld"](13,0,null,null,8,"div",[["class","row align-items-center justify-content-center h-100"]],[[8,"hidden",0]],null,null,null,null)),(l()(),n["\u0275eld"](14,0,null,null,1,"div",[["class","col-md-4 mb-4 d-flex justify-content-center"]],[[8,"hidden",0]],null,null,null,null)),(l()(),n["\u0275eld"](15,0,null,null,0,"div",[["class","amcharts"],["id","current-gauge-chart-toneladas"]],null,null,null,null,null)),(l()(),n["\u0275eld"](16,0,null,null,1,"div",[["class","col-md-4 mb-4 d-flex justify-content-center"]],[[8,"hidden",0]],null,null,null,null)),(l()(),n["\u0275eld"](17,0,null,null,0,"div",[["class","amcharts"],["id","current-gauge-chart-clientes"]],null,null,null,null,null)),(l()(),n["\u0275eld"](18,0,null,null,1,"div",[["class","col-md-4 mb-4 d-flex justify-content-center"]],[[8,"hidden",0]],null,null,null,null)),(l()(),n["\u0275eld"](19,0,null,null,0,"div",[["class","amcharts"],["id","current-gauge-chart-extras"]],null,null,null,null,null)),(l()(),n["\u0275and"](16777216,null,null,1,null,g)),n["\u0275did"](21,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),n["\u0275and"](16777216,null,null,1,null,y)),n["\u0275did"](23,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,e){var t=e.component;l(e,3,0,t.showHeader),l(e,12,0,t.pastChartsEmpty),l(e,21,0,t.currChartsEmpty),l(e,23,0,!t.chartLoaded)}),(function(l,e){var t=e.component;l(e,4,0,!t.chartLoaded||t.activeMonth==t.currMonth),l(e,5,0,t.pastToneladasEmpty||t.pastChartsEmpty),l(e,7,0,t.pastClientesEmpty||t.pastChartsEmpty),l(e,9,0,t.pastExtrasEmpty||t.pastChartsEmpty),l(e,13,0,!t.chartLoaded||t.activeMonth==t.pastMonth),l(e,14,0,t.currToneladasEmpty||t.currChartsEmpty),l(e,16,0,t.currClientesEmpty||t.currChartsEmpty),l(e,18,0,t.currExtrasEmpty||t.currChartsEmpty)}))}},yFC9:function(l,e,t){"use strict";t.d(e,"a",(function(){return r}));var n=t("IzEk"),a=t("8Y7J"),s=t("IheW");let r=(()=>{class l{constructor(l){this.http=l,this.API="http://23.254.204.187/api/comercial/dashboard/vendedor"}getDesempenhoToneladas(l,e){return this.http.get(`${this.API}/desempenho/toneladas/${l}/${e}`).pipe(Object(n.a)(1))}getDesempenhoLinhas(l,e){return this.http.get(`${this.API}/desempenho/linhas/${l}/${e}`).pipe(Object(n.a)(1))}getConcentracaoVendas(l){return this.http.get(`${this.API}/concentracao-vendas/${l}`).pipe(Object(n.a)(1))}getMetas(l,e){return this.http.get(`${this.API}/metas/${l}/${e}`).pipe(Object(n.a)(1))}getClientes(l,e){return this.http.get(`${this.API}/carteira-clientes/${l}/${e}`).pipe(Object(n.a)(1))}getRegistroOcorrencias(l,e){return this.http.get(`${this.API}/registro-ocorrencias/${l}/${e}`).pipe(Object(n.a)(1))}getFinanceiroInadimplentes(l,e){return this.http.get(`${this.API}/financeiro/inadimplentes/${l}/${e}`).pipe(Object(n.a)(1))}getValorRepresentante(l){return this.http.get(`${this.API}/financeiro/representantes/${l}`).pipe(Object(n.a)(1))}getFinanceiroNotasDebito(l,e){return this.http.get(`${this.API}/financeiro/notas-debito/${l}/${e}`).pipe(Object(n.a)(1))}}return l.\u0275prov=a["\u0275\u0275defineInjectable"]({factory:function(){return new l(a["\u0275\u0275inject"](s.c))},token:l,providedIn:"root"}),l})()}}]);