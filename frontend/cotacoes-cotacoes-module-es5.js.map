{"version":3,"sources":["webpack:///src/app/modules/comercial/ciclo-vendas/cotacoes/formulario/guards/data-resolver.guard.ts","webpack:///src/app/modules/comercial/ciclo-vendas/cotacoes/formulario/guards/profile-resolver.guard.ts","webpack:///src/app/modules/comercial/ciclo-vendas/cotacoes/cotacoes.module.ts","webpack:///src/app/modules/comercial/ciclo-vendas/cotacoes/formulario/guards/permissoes-resolver.guard.ts","webpack:///src/app/modules/comercial/ciclo-vendas/cotacoes/lista/guards/profile-resolver.guard.ts","webpack:///src/app/modules/comercial/ciclo-vendas/cotacoes/formulario/guards/cliente-resolver.guard.ts","webpack:///src/app/modules/comercial/ciclo-vendas/cotacoes/cotacoes-routing.module.ts","webpack:///src/app/modules/comercial/ciclo-vendas/cotacoes/lista/guards/finalizacao-resolver.guard.ts"],"names":["ComercialCicloVendasCotacoesFormularioDataResolverGuard","cotacoesService","authService","dateService","user","getCurrentUser","info","route","params","codCotacao","getCotacao","idEmpresa","success","mensagem","data","codVendedor","nomeVendedor","tipoCotacao","codSituacao","codCliente","parseInt","codContato","codEndereco","codEmpresa","codDeposito","notaFiscalMae","codFormaPagamento","duplicatasSomenteCarteira","dataEntrega","dataEncerramento","dataValidade","dataLancamento","convert2PhpDate","Date","codFormaContato","codOrigemContato","observacoes","freteConta","codTransportadora","dadosAdicionais","carrinho","providedIn","ComercialCicloVendasCotacoesFormularioProfilesResolverGuard","comercialService","getPerfil","ComercialCicloVendasCotacoesModule","declarations","imports","providers","ComercialCicloVendasCotacoesFormularioPermissoesResolverGuard","getPermissoesAcesso","ComercialCicloVendasCotacoesListaProfilesResolverGuard","ComercialCicloVendasCotacoesFormularioClienteResolverGuard","vendedoresService","getValidaClienteCarteira","podeAcessar","routes","path","component","resolve","profile","cliente","permissoes","canDeactivate","redirectTo","pathMatch","children","ComercialCicloVendasCotacoesRoutingModule","forChild","exports","ComercialCicloVendasCotacoesListaFinalizacaoResolverGuard","date","dataInicial","getFullYear","getMonth","getDate","dataFinal","getCotacoes","nrPedido","pagina","registros","convertToUrlDate","nrProposta"],"mappings":"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","file":"cotacoes-cotacoes-module-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n// Services\r\nimport { ComercialCicloVendasCotacoesService } from '../../cotacoes.service';\r\nimport { AuthService } from 'src/app/shared/services/core/auth.service';\r\nimport { DateService } from 'src/app/shared/services/core/date.service';\r\n\r\n// Interfaces\r\nimport { JsonResponse } from 'src/app/models/json-response';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ComercialCicloVendasCotacoesFormularioDataResolverGuard\r\n  implements Resolve<any> {\r\n  user: any;\r\n\r\n  constructor(\r\n    private cotacoesService: ComercialCicloVendasCotacoesService,\r\n    private authService: AuthService,\r\n    private dateService: DateService\r\n  ) {\r\n    this.user = this.authService.getCurrentUser().info;\r\n  }\r\n\r\n  resolve(route: ActivatedRouteSnapshot): Observable<Object | JsonResponse> {\r\n    if (route.params && route.params.codCotacao) {\r\n      return this.cotacoesService.getCotacao(\r\n        route.params.codCotacao,\r\n        route.params.idEmpresa\r\n      );\r\n    }\r\n\r\n    // É implementado o método \"of\" para manter a tipagem de retorno com Observable.\r\n    return of({\r\n      success: true,\r\n      mensagem: null,\r\n      data: {\r\n        codVendedor: 88,\r\n        nomeVendedor: 'TIETE CC - LILIANE BUENO',\r\n        /* codVendedor: this.user.idVendedor,\r\n        nomeVendedor: this.user.nomeAbreviado || this.user.nomeCompleto, */\r\n        tipoCotacao: 'Cotação',\r\n        codSituacao: null,\r\n        codCliente:\r\n          typeof route.params.codCliente !== 'undefined'\r\n            ? parseInt(route.params.codCliente)\r\n            : null,\r\n        codContato: null,\r\n        codEndereco: null,\r\n        codEmpresa: null,\r\n        codDeposito: null,\r\n        notaFiscalMae: null,\r\n        codFormaPagamento: null,\r\n        duplicatasSomenteCarteira: false,\r\n        dataEntrega: null,\r\n        dataEncerramento: null,\r\n        dataValidade: null,\r\n        dataLancamento: this.dateService.convert2PhpDate(new Date()),\r\n        codFormaContato: null,\r\n        codOrigemContato: null,\r\n        observacoes: null,\r\n        freteConta: null,\r\n        codTransportadora: null,\r\n        dadosAdicionais: null,\r\n        carrinho: [],\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n// Services\r\nimport { ComercialService } from 'src/app/modules/comercial/comercial.service';\r\n\r\n// Interfaces\r\nimport { JsonResponse } from 'src/app/models/json-response';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ComercialCicloVendasCotacoesFormularioProfilesResolverGuard\r\n  implements Resolve<any> {\r\n  constructor(private comercialService: ComercialService) {}\r\n\r\n  resolve(): Observable<Object | JsonResponse> {\r\n    return this.comercialService.getPerfil();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n// Modules\r\nimport { ComercialCicloVendasCotacoesRoutingModule } from './cotacoes-routing.module';\r\nimport { ComercialCicloVendasCotacoesListaModule } from './lista/lista.module';\r\nimport { ComercialCicloVendasCotacoesFormularioModule } from './formulario/formulario.module';\r\n\r\n// Interfaces\r\nimport { FormDeactivateGuard } from 'src/app/guards/form-deactivate.guard';\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    CommonModule,\r\n    ComercialCicloVendasCotacoesRoutingModule,\r\n    ComercialCicloVendasCotacoesListaModule,\r\n    ComercialCicloVendasCotacoesFormularioModule\r\n  ],\r\n  providers: [FormDeactivateGuard],\r\n})\r\nexport class ComercialCicloVendasCotacoesModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n// Services\r\nimport { ComercialCicloVendasCotacoesService } from '../../cotacoes.service';\r\n\r\n// Interfaces\r\nimport { JsonResponse } from 'src/app/models/json-response';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ComercialCicloVendasCotacoesFormularioPermissoesResolverGuard\r\n  implements Resolve<any> {\r\n  constructor(private cotacoesService: ComercialCicloVendasCotacoesService) {}\r\n\r\n  resolve(): Observable<Object | JsonResponse> {\r\n    return this.cotacoesService.getPermissoesAcesso();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n// Services\r\nimport { ComercialService } from 'src/app/modules/comercial/comercial.service';\r\n\r\n// Interfaces\r\nimport { JsonResponse } from 'src/app/models/json-response';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ComercialCicloVendasCotacoesListaProfilesResolverGuard\r\n  implements Resolve<any> {\r\n  constructor(private comercialService: ComercialService) {}\r\n\r\n  resolve(): Observable<Object | JsonResponse> {\r\n    return this.comercialService.getPerfil();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n// Services\r\nimport { ComercialVendedoresService } from 'src/app/modules/comercial/services/vendedores.service';\r\n\r\n// Interfaces\r\nimport { JsonResponse } from 'src/app/models/json-response';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ComercialCicloVendasCotacoesFormularioClienteResolverGuard\r\n  implements Resolve<any> {\r\n  constructor(private vendedoresService: ComercialVendedoresService) {}\r\n\r\n  resolve(route: ActivatedRouteSnapshot): Observable<Object | JsonResponse> {\r\n    if (route.params && route.params.codCliente) {\r\n      return this.vendedoresService.getValidaClienteCarteira(\r\n        route.params.codCliente\r\n      );\r\n    }\r\n\r\n    // É implementado o método \"of\" para manter a tipagem de retorno com Observable.\r\n    return of({\r\n      success: true,\r\n      mensagem: null,\r\n      data: {\r\n        podeAcessar: true,\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\n// Guards\r\nimport { FormDeactivateGuard } from 'src/app/guards/form-deactivate.guard';\r\nimport { ComercialCicloVendasCotacoesListaProfilesResolverGuard } from './lista/guards/profile-resolver.guard';\r\nimport { ComercialCicloVendasCotacoesFormularioClienteResolverGuard } from './formulario/guards/cliente-resolver.guard';\r\nimport { ComercialCicloVendasCotacoesFormularioDataResolverGuard } from './formulario/guards/data-resolver.guard';\r\nimport { ComercialCicloVendasCotacoesFormularioPermissoesResolverGuard } from './formulario/guards/permissoes-resolver.guard';\r\nimport { ComercialCicloVendasCotacoesFormularioProfilesResolverGuard } from './formulario/guards/profile-resolver.guard';\r\nimport { ComercialCicloVendasCotacoesListaFinalizacaoResolverGuard } from './lista/guards/finalizacao-resolver.guard';\r\nimport { PdfComponent } from './lista/pdf/pdf.component';\r\n\r\n// Modules\r\nimport { ComercialCicloVendasCotacoesListaModule } from './lista/lista.module';\r\nimport { ComercialCicloVendasCotacoesFormularioModule } from './formulario/formulario.module';\r\n\r\n// Components\r\nimport { ComercialCicloVendasCotacoesListaComponent } from './lista/lista.component';\r\nimport { ComercialCicloVendasCotacoesFormularioComponent } from './formulario/formulario.component';\r\nimport { VistaComponent } from './lista/vista/vista.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'lista',\r\n    component: ComercialCicloVendasCotacoesListaComponent,\r\n    resolve: {\r\n      profile: ComercialCicloVendasCotacoesListaProfilesResolverGuard,\r\n    }\r\n  },\r\n  {\r\n    path: 'lista/:codCotacao/:codEmpresa',\r\n    component: ComercialCicloVendasCotacoesListaComponent,\r\n    resolve: {\r\n      data: ComercialCicloVendasCotacoesListaFinalizacaoResolverGuard,\r\n      profile: ComercialCicloVendasCotacoesListaProfilesResolverGuard\r\n    },\r\n  },\r\n\r\n  {\r\n    path: 'novo/:idReservado/:codEmpresa',\r\n    component: ComercialCicloVendasCotacoesFormularioComponent,\r\n    resolve: {\r\n      cliente: ComercialCicloVendasCotacoesFormularioClienteResolverGuard,\r\n      data: ComercialCicloVendasCotacoesFormularioDataResolverGuard,\r\n      permissoes: ComercialCicloVendasCotacoesFormularioPermissoesResolverGuard,\r\n      profile: ComercialCicloVendasCotacoesFormularioProfilesResolverGuard\r\n    },\r\n    canDeactivate: [FormDeactivateGuard],\r\n  },\r\n  {\r\n    path: 'novo/:idReservado',\r\n    component: ComercialCicloVendasCotacoesFormularioComponent,\r\n    resolve: {\r\n      cliente: ComercialCicloVendasCotacoesFormularioClienteResolverGuard,\r\n      data: ComercialCicloVendasCotacoesFormularioDataResolverGuard,\r\n      permissoes: ComercialCicloVendasCotacoesFormularioPermissoesResolverGuard,\r\n      profile: ComercialCicloVendasCotacoesFormularioProfilesResolverGuard\r\n    },\r\n    canDeactivate: [FormDeactivateGuard],\r\n  },\r\n\r\n  {\r\n    path: 'editar/:codCotacao/:idEmpresa',\r\n    component: ComercialCicloVendasCotacoesFormularioComponent,\r\n    resolve: {\r\n      cliente: ComercialCicloVendasCotacoesFormularioClienteResolverGuard,\r\n      data: ComercialCicloVendasCotacoesFormularioDataResolverGuard,\r\n      permissoes: ComercialCicloVendasCotacoesFormularioPermissoesResolverGuard,\r\n      profile: ComercialCicloVendasCotacoesFormularioProfilesResolverGuard\r\n    },\r\n    canDeactivate: [FormDeactivateGuard],\r\n  },\r\n  {\r\n    path: 'visualizar/:codCotacao/:idEmpresa',\r\n    component: ComercialCicloVendasCotacoesFormularioComponent,\r\n    resolve: {\r\n      cliente: ComercialCicloVendasCotacoesFormularioClienteResolverGuard,\r\n      data: ComercialCicloVendasCotacoesFormularioDataResolverGuard,\r\n      permissoes: ComercialCicloVendasCotacoesFormularioPermissoesResolverGuard,\r\n      profile: ComercialCicloVendasCotacoesFormularioProfilesResolverGuard\r\n    },\r\n    canDeactivate: [FormDeactivateGuard],\r\n  },\r\n  {\r\n    path: '',\r\n    redirectTo: 'lista',\r\n    pathMatch: 'full',\r\n    children: [\r\n      {\r\n        path: 'pdf',\r\n        component: PdfComponent,\r\n        pathMatch: 'full',\r\n      },\r\n      {\r\n        path: 'vista/:id_oferta',\r\n        component: VistaComponent\r\n      },\r\n    ]\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forChild(routes),\r\n    ComercialCicloVendasCotacoesListaModule,\r\n    ComercialCicloVendasCotacoesFormularioModule\r\n  ],\r\n  exports: [RouterModule],\r\n})\r\nexport class ComercialCicloVendasCotacoesRoutingModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n// Services\r\nimport { ComercialCicloVendasCotacoesService } from '../../cotacoes.service';\r\nimport { AuthService } from 'src/app/shared/services/core/auth.service';\r\nimport { DateService } from 'src/app/shared/services/core/date.service';\r\n\r\n// Interfaces\r\nimport { JsonResponse } from 'src/app/models/json-response';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ComercialCicloVendasCotacoesListaFinalizacaoResolverGuard\r\n  implements Resolve<any> {\r\n  user: any;\r\n\r\n  constructor(\r\n    private cotacoesService: ComercialCicloVendasCotacoesService,\r\n    private authService: AuthService,\r\n    private dateService: DateService\r\n  ) {\r\n    this.user = this.authService.getCurrentUser().info;\r\n  }\r\n\r\n  resolve(route: ActivatedRouteSnapshot): Observable<Object | JsonResponse> {\r\n    if (route.params) {\r\n      let date = new Date();\r\n      let dataInicial = new Date(date.getFullYear(), date.getMonth(), date.getDate() - 360);\r\n      let dataFinal = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n      return this.cotacoesService.getCotacoes(\r\n        {\r\n          nrPedido: route.params.codCotacao,\r\n          codEmpresa: route.params.codEmpresa,\r\n          pagina: 1,\r\n          registros: 100,\r\n          codVendedor: 0,\r\n          codDeposito: null,\r\n          dataInicial: this.dateService.convertToUrlDate(dataInicial),\r\n          dataFinal: this.dateService.convertToUrlDate(dataFinal),\r\n        },\r\n      );\r\n    }\r\n\r\n    // É implementado o método \"of\" para manter a tipagem de retorno com Observable.\r\n    return of({\r\n      success: true,\r\n      mensagem: null,\r\n      data: {\r\n        codVendedor: null,\r\n        nrProposta: null,\r\n      },\r\n    });\r\n  }\r\n}\r\n"]}