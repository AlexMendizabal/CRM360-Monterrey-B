{"version":3,"sources":["./src/app/modules/comercial/gestao/associacoes/coordenadores-escritorios/coordenadores-escritorios-routing.module.ts","./src/app/modules/comercial/gestao/associacoes/coordenadores-escritorios/formulario/formulario.component.html","./src/app/modules/comercial/gestao/associacoes/coordenadores-escritorios/formulario/formulario.component.scss","./src/app/guards/form-deactivate.guard.ts","./src/app/modules/comercial/gestao/associacoes/coordenadores-escritorios/coordenadores-escritorios.module.ts","./src/app/modules/comercial/gestao/associacoes/coordenadores-escritorios/formulario/formulario.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEvD,SAAS;AACkE;AAE3E,aAAa;AAC6G;AAE1H,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sIAAqE;QAChF,aAAa,EAAE,CAAC,wFAAmB,CAAC;KACrC;CACF,CAAC;IAMW,gEAAgE,SAAhE,gEAAgE;CAAG;AAAnE,gEAAgE;IAJ5E,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,gEAAgE,CAAG;AAAH;;;;;;;;;;;;;ACrB7E;AAAe,ksDAAmoD,E;;;;;;;;;;;;ACAlpD;AAAe,6GAA8C,2OAA2O,E;;;;;;;;;;;;;;;;;ACA7P;IAe9B,mBAAmB,SAAnB,mBAAmB;IAC9B,aAAa,CACX,SAA6B,EAC7B,KAA6B,EAC7B,KAA0B;QAM1B,OAAO,SAAS,CAAC,iBAAiB,EAAE,CAAC;IACvC,CAAC;CACF;AAZY,mBAAmB;IAH/B,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,mBAAmB,CAY/B;AAZ+B;;;;;;;;;;;;;;;;;;;;;;;;;ACfS;AACM;AACmB;AAElE,YAAY;AAC0C;AAEtD,UAAU;AAC0D;AACQ;AACkD;AAE9H,aAAa;AAC6G;IAgB7G,yDAAyD,SAAzD,yDAAyD;CAAG;AAA5D,yDAAyD;IAdrE,8DAAQ,CAAC;QACR,YAAY,EAAE;YACZ,sIAAqE;SACtE;QACD,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,kEAAmB;YACnB,mEAAc;YACd,iFAAY;YACZ,yFAAe;YACf,0IAAgE;SACjE;KACF,CAAC;GACW,yDAAyD,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BpB;AACP;AACM;AACmB;AAMpE,WAAW;AACmE;AACmC;AACzB;AACd;IAO7D,qEAAqE,SAArE,qEAAqE;IAahF,YACU,cAA8B,EAC9B,QAAkB,EAClB,+BAA0F,EAC1F,WAAwB,EACxB,cAA8B,EAC9B,iBAAoC,EACpC,YAA0B;QAN1B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,aAAQ,GAAR,QAAQ,CAAU;QAClB,oCAA+B,GAA/B,+BAA+B,CAA2D;QAC1F,gBAAW,GAAX,WAAW,CAAa;QACxB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,iBAAY,GAAZ,YAAY,CAAc;QAlBpC,qBAAgB,GAAG,IAAI,CAAC;QACxB,iBAAY,GAAG,KAAK,CAAC;QAErB,mBAAc,GAAsB,EAAE,CAAC;QAGvC,gBAAW,GAAG,KAAK,CAAC;QAEpB,kBAAa,GAAe,EAAE,CAAC;QAC/B,gBAAW,GAAe,EAAE,CAAC;QAW3B,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;IACnC,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,2CAA2C,CAAC,CAAC;IAC1E,CAAC;IAED,eAAe;QACb,IAAI,CAAC,iBAAiB,CAAC,eAAe,EAAE,CAAC,SAAS,EAAE,CAAC;IACvD,CAAC;IAED,aAAa;QACX,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,MAAW,EAAE,EAAE;YACnD,IAAI,CAAC,cAAc,GAAG;gBACpB;oBACE,SAAS,EAAE,MAAM;oBACjB,UAAU,EAAE,iBAAiB;iBAC9B;gBACD;oBACE,SAAS,EAAE,QAAQ;oBACnB,UAAU,EAAE,qBAAqB,MAAM,CAAC,aAAa,CAAC,EAAE;iBACzD;gBACD;oBACE,SAAS,EAAE,2CAA2C;iBACvD;aACF,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED,aAAa;QACX,IAAI,CAAC,+BAA+B;aACjC,gCAAgC,EAAE;aAClC,SAAS,CAAC;YACT,IAAI,EAAE,CAAC,QAAa,EAAE,EAAE;gBACtB,IAAI,QAAQ,CAAC,cAAc,CAAC,KAAK,GAAG,EAAE;oBACpC,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,eAAe,CAAC,CAAC;oBACzD,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;oBACrD,IAAI,CAAC,cAAc,EAAE,CAAC;iBACvB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;oBAC5B,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;iBACtB;YACH,CAAC;YACD,KAAK,EAAE,CAAC,KAAU,EAAE,EAAE;gBACpB,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;gBAC5B,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACvB,CAAC;SACF,CAAC,CAAC;IACP,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YACjC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;YAC1C,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;SAC3C,CAAC,CAAC;QAEH,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,QAAQ;QACN,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClD,IACE,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,EACpE;gBACA,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE;oBACnD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;iBACvC;qBAAM;oBACL,IAAI,CAAC,IAAI;yBACN,GAAG,CAAC,aAAa,CAAC;yBAClB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;iBACnD;gBACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;SACF;IACH,CAAC;IAED,iBAAiB;QACf,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,OAAO,CAAC,4CAA4C,CAAC,EAAE;gBACzD,OAAO,IAAI,CAAC;aACb;iBAAM;gBACL,OAAO,KAAK,CAAC;aACd;SACF;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,QAAQ;QACN,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,EAAE;YAClC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YAEzB,IACE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,IAAI;gBACtC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,EAAE;gBAEpC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG;oBAC/B,CAAC,EAAE,CAAC;iBACL,CAAC;YAEJ,IAAI,CAAC,+BAA+B;iBACjC,kCAAkC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;iBACnD,SAAS,CAAC,CAAC,QAAa,EAAE,EAAE;gBAC3B,IAAI,QAAQ,CAAC,cAAc,CAAC,KAAK,GAAG,EAAE;oBACpC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;oBAC9B,IAAI,CAAC,aAAa,EAAE,CAAC;oBAErB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;oBAC1B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;oBAC7B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oBAEzB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;oBAC5C,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;iBAC7C;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;oBAC5B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;iBAC3B;YACH,CAAC,CAAC,CAAC;SACN;IACH,CAAC;CACF;;YAlKQ,8DAAc;YADd,wDAAQ;YAUR,4HAAyD;YARzD,0DAAW;YAOX,2FAAc;YAEd,qGAAiB;YACjB,wFAAY;;AAOR,qEAAqE;IALjF,+DAAS,CAAC;QACT,QAAQ,EAAE,mEAAmE;QAC7E,uFAA0C;;KAE3C,CAAC;mFAe0B,8DAAc;QACpB,wDAAQ;QACe,4HAAyD;QAC7E,0DAAW;QACR,2FAAc;QACX,qGAAiB;QACtB,wFAAY;GApBzB,qEAAqE,CAgJjF;AAhJiF","file":"associacoes-coordenadores-escritorios-coordenadores-escritorios-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\n// Guards\r\nimport { FormDeactivateGuard } from 'src/app/guards/form-deactivate.guard';\r\n\r\n// Components\r\nimport { ComercialGestaoAssociacoesCoordenadoresEscritoriosFormularioComponent } from './formulario/formulario.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ComercialGestaoAssociacoesCoordenadoresEscritoriosFormularioComponent,\r\n    canDeactivate: [FormDeactivateGuard]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ComercialGestaoAssociacioesCoordenadoresEscritoriosRoutingModule {}\r\n","export default \"<loader-spinner-navbar *ngIf=\\\"loaderNavbar\\\"></loader-spinner-navbar>\\r\\n<loader-spinner-full-screen *ngIf=\\\"loaderFullScreen\\\"></loader-spinner-full-screen>\\r\\n<app-header appTitle=\\\"Associação de coordenadores e escritórios\\\">\\r\\n  <button\\r\\n    type=\\\"button\\\"\\r\\n    (click)=\\\"onSubmit()\\\"\\r\\n    [disabled]=\\\"loaderNavbar\\\">\\r\\n    Salvar\\r\\n  </button>\\r\\n</app-header>\\r\\n<app-body [breadCrumbTree]=\\\"breadCrumbTree\\\">\\r\\n  <div class=\\\"row justify-content-center\\\" *ngIf=\\\"!loaderFullScreen\\\">\\r\\n    <div class=\\\"col-4\\\">\\r\\n      <form [formGroup]=\\\"form\\\" autocomplete=\\\"off\\\">\\r\\n        <div class=\\\"form-row\\\">\\r\\n          <div class=\\\"form-group col\\\">\\r\\n            <label for=\\\"coordenador\\\">Coordenador</label>\\r\\n            <ng-select\\r\\n              [items]=\\\"coordenadores\\\"\\r\\n              labelForId=\\\"coordenador\\\"\\r\\n              bindValue=\\\"matricula\\\"\\r\\n              bindLabel=\\\"nome\\\"\\r\\n              formControlName=\\\"coordenador\\\"\\r\\n              (change)=\\\"onChange()\\\">\\r\\n            </ng-select>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"form-row\\\">\\r\\n          <div class=\\\"form-group col\\\">\\r\\n            <label for=\\\"escritorios\\\">Escritórios</label>\\r\\n            <ng-select\\r\\n              [items]=\\\"escritorios\\\"\\r\\n              [multiple]=\\\"true\\\"\\r\\n              [closeOnSelect]=\\\"false\\\"\\r\\n              labelForId=\\\"escritorios\\\"\\r\\n              bindValue=\\\"id\\\"\\r\\n              bindLabel=\\\"descricao\\\"\\r\\n              formControlName=\\\"escritorios\\\">\\r\\n            </ng-select>\\r\\n          </div>\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</app-body>\\r\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvY29tZXJjaWFsL2dlc3Rhby9hc3NvY2lhY29lcy9jb29yZGVuYWRvcmVzLWVzY3JpdG9yaW9zL2Zvcm11bGFyaW8vZm9ybXVsYXJpby5jb21wb25lbnQuc2NzcyJ9 */\";","import { Injectable } from '@angular/core';\r\nimport {\r\n  CanDeactivate,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  UrlTree\r\n} from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n// Interfaces\r\nimport { IFormCanDeactivate } from './iform-candeactivate';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FormDeactivateGuard implements CanDeactivate<IFormCanDeactivate> {\r\n  canDeactivate(\r\n    component: IFormCanDeactivate,\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ):\r\n    | Observable<boolean | UrlTree>\r\n    | Promise<boolean | UrlTree>\r\n    | boolean\r\n    | UrlTree {\r\n    return component.formCanDeactivate();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n// ng-select\r\nimport { NgSelectModule } from '@ng-select/ng-select';\r\n\r\n// Modules\r\nimport { SharedModule } from 'src/app/shared/modules/shared.module';\r\nimport { TemplatesModule } from 'src/app/shared/templates/templates.module';\r\nimport { ComercialGestaoAssociacioesCoordenadoresEscritoriosRoutingModule } from './coordenadores-escritorios-routing.module';\r\n\r\n// Components\r\nimport { ComercialGestaoAssociacoesCoordenadoresEscritoriosFormularioComponent } from './formulario/formulario.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ComercialGestaoAssociacoesCoordenadoresEscritoriosFormularioComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgSelectModule,\r\n    SharedModule,\r\n    TemplatesModule,\r\n    ComercialGestaoAssociacioesCoordenadoresEscritoriosRoutingModule\r\n  ]\r\n})\r\nexport class ComercialGestaoAssociacioesCoordenadoresEscritoriosModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\r\n\r\n// Interfaces\r\nimport { IFormCanDeactivate } from 'src/app/guards/iform-candeactivate';\r\nimport { Breadcrumb } from 'src/app/shared/modules/breadcrumb/breadcrumb';\r\n\r\n// Services\r\nimport { PNotifyService } from 'src/app/shared/services/core/pnotify.service';\r\nimport { ComercialGestaoAssociacoesCoordenadoresEscritoriosService } from '../coordenadores-escritorios.service';\r\nimport { AtividadesService } from 'src/app/shared/services/requests/atividades.service';\r\nimport { TitleService } from 'src/app/shared/services/core/title.service';\r\n\r\n@Component({\r\n  selector: 'comercial-gestao-associacoes-coordenadores-escritorios-formulario',\r\n  templateUrl: './formulario.component.html',\r\n  styleUrls: ['./formulario.component.scss']\r\n})\r\nexport class ComercialGestaoAssociacoesCoordenadoresEscritoriosFormularioComponent\r\n  implements OnInit, IFormCanDeactivate {\r\n  loaderFullScreen = true;\r\n  loaderNavbar = false;\r\n\r\n  breadCrumbTree: Array<Breadcrumb> = [];\r\n\r\n  form: FormGroup;\r\n  formChanged = false;\r\n\r\n  coordenadores: Array<any> = [];\r\n  escritorios: Array<any> = [];\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute,\r\n    private location: Location,\r\n    private coordenadoresEscritoriosService: ComercialGestaoAssociacoesCoordenadoresEscritoriosService,\r\n    private formBuilder: FormBuilder,\r\n    private pnotifyService: PNotifyService,\r\n    private atividadesService: AtividadesService,\r\n    private titleService: TitleService\r\n  ) {\r\n    this.pnotifyService.getPNotify();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.registrarAcesso();\r\n    this.setBreadCrumb();\r\n    this.getFormFields();\r\n    this.titleService.setTitle('Associação de coordenadores e escritórios');\r\n  }\r\n\r\n  registrarAcesso() {\r\n    this.atividadesService.registrarAcesso().subscribe();\r\n  }\r\n\r\n  setBreadCrumb() {\r\n    this.activatedRoute.params.subscribe((params: any) => {\r\n      this.breadCrumbTree = [\r\n        {\r\n          descricao: 'Home',\r\n          routerLink: '/comercial/home'\r\n        },\r\n        {\r\n          descricao: 'Gestão',\r\n          routerLink: `/comercial/gestao/${params['idSubModulo']}`\r\n        },\r\n        {\r\n          descricao: 'Associação de coordenadores e escritórios'\r\n        }\r\n      ];\r\n    });\r\n  }\r\n\r\n  getFormFields() {\r\n    this.coordenadoresEscritoriosService\r\n      .getListaCoordenadoresEscritorios()\r\n      .subscribe({\r\n        next: (response: any) => {\r\n          if (response['responseCode'] === 200) {\r\n            this.coordenadores = response['result']['coordenadores'];\r\n            this.escritorios = response['result']['escritorios'];\r\n            this.setFormBuilder();\r\n          } else {\r\n            this.pnotifyService.error();\r\n            this.location.back();\r\n          }\r\n        },\r\n        error: (error: any) => {\r\n          this.pnotifyService.error();\r\n          this.location.back();\r\n        }\r\n      });\r\n  }\r\n\r\n  setFormBuilder() {\r\n    this.form = this.formBuilder.group({\r\n      coordenador: [null, [Validators.required]],\r\n      escritorios: [null, [Validators.required]]\r\n    });\r\n\r\n    this.loaderFullScreen = false;\r\n  }\r\n\r\n  onChange() {\r\n    for (let i = 0; i < this.coordenadores.length; i++) {\r\n      if (\r\n        this.coordenadores[i]['matricula'] == this.form.value['coordenador']\r\n      ) {\r\n        if (this.coordenadores[i]['escritorios'][0] == null) {\r\n          this.form.value['escritorios'] = null;\r\n        } else {\r\n          this.form\r\n            .get('escritorios')\r\n            .setValue(this.coordenadores[i]['escritorios']);\r\n        }\r\n        this.formChanged = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  formCanDeactivate() {\r\n    if (this.formChanged) {\r\n      if (confirm('Este cliente no forma parte de tu cartera?')) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.form.value['coordenador']) {\r\n      this.loaderNavbar = true;\r\n\r\n      if (\r\n        this.form.value['escritorios'] == null ||\r\n        this.form.value['escritorios'] == ''\r\n      )\r\n        this.form.value['escritorios'] = {\r\n          0: 0\r\n        };\r\n\r\n      this.coordenadoresEscritoriosService\r\n        .putAssociacaoCoordenadorEscritorio(this.form.value)\r\n        .subscribe((response: any) => {\r\n          if (response['responseCode'] === 200) {\r\n            this.pnotifyService.success();\r\n            this.getFormFields();\r\n\r\n            this.loaderNavbar = false;\r\n            this.loaderFullScreen = true;\r\n            this.formChanged = false;\r\n\r\n            this.form.get('coordenador').setValue(null);\r\n            this.form.get('escritorios').setValue(null);\r\n          } else {\r\n            this.pnotifyService.error();\r\n            this.loaderNavbar = false;\r\n          }\r\n        });\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}